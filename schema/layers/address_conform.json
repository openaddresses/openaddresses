{
  "description": "top-level address conform schema",
  "type": "object",
  "required": ["number", "street"],
  "additionalProperties": false,
  "properties": {
    "format": {
      "type": "string",
      "enum": ["csv", "gdb", "geojson", "shapefile", "shapefile-polygon", "xml"]
    },
    "addrtype": { "type": "string" },
    "accuracy": {
      "description": "https://github.com/openaddresses/openaddresses/blob/master/CONTRIBUTING.md#accuracy",
      "oneOf": [
        { "type": "string" },
        { "type": "integer", "minimum": 1, "maximum": 5 },
        { "$ref": "../util/functions/map_integer.json" }
      ]
    },
    "srs": { "type": "string", "pattern": "EPSG:[0-9]+" },
    "file": { "type": "string" },
    "layer": {
      "description": "specifies a layer to use in the GDB",
      "oneOf": [{ "type": "integer" }, { "type": "string" }]
    },
    "encoding": { "type": "string" },
    "csvsplit": { "type": "string" },
    "headers": { "type": "integer", "minimum": -1 },
    "skiplines": { "type": "integer", "minimum": 1 },
    "notes": { "type": "string" },
    "id": {
      "description": "unique identifier for the address row",
      "$ref": "../util/functions/standard_functions.json"
    },
    "number": {
      "description": "the house number for the address row",
      "oneOf": [
        { "$ref": "../util/functions/standard_functions.json" },
        { "$ref": "../util/functions/prefixed_number.json" }
      ]
    },
    "street": {
      "description": "the street/road for the address row",
      "oneOf": [
        { "$ref": "../util/functions/standard_functions.json" },
        { "$ref": "../util/functions/postfixed_street.json" }
      ]
    },
    "unit": {
      "description": "the suite/unit/apartment for the address row",
      "oneOf": [
        { "$ref": "../util/functions/standard_functions.json" },
        { "$ref": "../util/functions/postfixed_unit.json" }
      ]
    },
    "city": {
      "description": "the city/locality for the address row",
      "$ref": "../util/functions/standard_functions.json"
    },
    "district": {
      "description": "the county for the address row",
      "$ref": "../util/functions/standard_functions.json"
    },
    "region": {
      "description": "the state/province for the address row",
      "$ref": "../util/functions/standard_functions.json"
    },
    "postcode": {
      "description": "the postcode for the address row",
      "$ref": "../util/functions/standard_functions.json"
    },
    "lon": {
      "description": "longitude value for the address row, only applies to CSV sources",
      "oneOf": [
        { "type": "null" },
        { "type": "string" },
        { "$ref": "../util/functions/regexp.json" }
      ]
    },
    "lat": {
      "description": "latitude value for the address row, only applies to CSV sources",
      "oneOf": [
        { "type": "null" },
        { "type": "string" },
        { "$ref": "../util/functions/regexp.json" }
      ]
    }
  }
}
